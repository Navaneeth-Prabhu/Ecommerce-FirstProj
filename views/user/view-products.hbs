<link href="https://fonts.googleapis.com/css2?family=Goldman&display=swap" rel="stylesheet">
<style>
  *{
    font-family: 'Goldman', cursive;
  }
  .product-grid {
    font-family: 'Poppins', sans-serif;
    text-align: center;
  }

  .product-grid .product-image {

    overflow: hidden;
    position: relative;
    z-index: 1;
  }

  .product-grid .product-image a.image {
    display: block;
  }

  .product-grid .product-image img {
    width: auto;
    height: 300px;
  }

  .product-grid .product-discount-label {
    color: #fff;
    background: #A5BA8D;
    font-size: 13px;
    font-weight: 600;
    line-height: 25px;
    padding: 0 20px;
    position: absolute;
    top: 10px;
    left: 0;
  }

  .product-grid .product-links {
    padding: 0;
    margin: 0;
    list-style: none;
    position: absolute;
    top: 10px;
    right: -50px;
    transition: all .5s ease 0s;
  }

  .product-grid:hover .product-links {
    right: 10px;
  }

  .product-grid .product-links li a {
    color: #333;
    background: transparent;
    font-size: 17px;
    line-height: 38px;
    width: 38px;
    height: 38px;
    border: 1px solid #333;
    border-bottom: none;
    display: block;
    transition: all 0.3s;
  }

  .product-grid .product-links li:last-child a {
    border-bottom: 1px solid #333;
  }

  .product-grid .product-links li a:hover {
    color: #fff;
    background: #333;
  }

  .product-grid .add-to-cart {
    background: #A5BA8D;
    color: #fff;
    font-size: 16px;
    text-transform: uppercase;
    letter-spacing: 2px;
    width: 100%;
    padding: 10px 26px;
    position: absolute;
    left: 0;
    bottom: -60px;
    transition: all 0.3s ease 0s;
  }

  .product-grid:hover .add-to-cart {
    bottom: 0;
  }

  .product-grid .add-to-cart:hover {
    text-shadow: 4px 4px rgba(0, 0, 0, 0.2);
  }

  .product-grid .product-content {
    background: #fff;
    padding: 15px;
    box-shadow: 0 0 0 5px rgba(0, 0, 0, 0.1) inset;
  }

  .product-grid .title {
    font-size: 16px;
    font-weight: 600;
    text-transform: capitalize;
    margin: 0 0 7px;
  }

  .product-grid .title a {
    color: #777;
    transition: all 0.3s ease 0s;
  }

  .product-grid .title a:hover {
    color: #a5ba8d;
  }

  .product-grid .price {
    color: #0d0d0d;
    font-size: 14px;
    font-weight: 600;
  }

  .product-grid .price span {
    color: #888;
    font-size: 13px;
    font-weight: 400;
    text-decoration: line-through;
  }

  @media screen and (max-width: 990px) {
    .product-grid {
      margin-bottom: 30px;
    }
  }
</style>

<section>

  <body>
    <div class="page-holder">
      <!-- navbar-->


      <div class="container">
        <!-- HERO SECTION-->
        <section class="py bg-light"><img class="img-fluid" src="/images/new.png" alt="">
          <div class="container">
            <div class="row px-4 px-lg-5 py-lg-4 align-items-center">
              <div class="col-lg-6">
                {{!-- <h1 class="h2 text-uppercase mb-0">Shop</h1> --}}
              </div>
              <div class="col-lg-6 text-lg-end">
                <nav aria-label="breadcrumb">
                  <ol class="breadcrumb justify-content-lg-end mb-0 px-0 bg-light">
                    <li class="breadcrumb-item"><a class="text-dark" href="">Home</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Shop</li>
                  </ol>
                </nav>
              </div>
            </div>
          </div>
        </section>
        <section class="py-5">
          <div class="container p-0">
            <div class="row">
              <!-- SHOP SIDEBAR-->
              {{!-- <div class="col-lg-3 order-2 order-lg-1">
                <h5 class="text-uppercase mb-4">Categories</h5>
                <div class="py-2 px-4 bg-dark text-white mb-3"><strong class="small text-uppercase fw-bold">Fashion
                    &amp; Acc</strong></div>
                <ul class="list-unstyled small text-muted ps-lg-4 font-weight-normal">
                  <li class="mb-2"><a class="reset-anchor" href="#!">Women's Watches</a></li>
                  <li class="mb-2"><a class="reset-anchor" href="#!">Men's Watches</a></li>

                </ul>
                <h6 class="text-uppercase mb-4">Price range</h6>
                <div class="price-range pt-4 mb-5">
                  <div id="range"></div>
                  <div class="row pt-2">
                    <div class="col-6"><strong class="small fw-bold text-uppercase">From</strong></div>
                    <div class="col-6 text-end"><strong class="small fw-bold text-uppercase">To</strong></div>
                  </div>
                </div>
                <h6 class="text-uppercase mb-3">Show only</h6>
                <div class="form-check mb-1">
                  <input class="form-check-input" type="checkbox" id="checkbox_1">
                  <label class="form-check-label" for="checkbox_1">Returns Accepted</label>
                </div>
                <div class="form-check mb-1">
                  <input class="form-check-input" type="checkbox" id="checkbox_2">
                  <label class="form-check-label" for="checkbox_2">Returns Accepted</label>
                </div>
                <div class="form-check mb-1">
                  <input class="form-check-input" type="checkbox" id="checkbox_3">
                  <label class="form-check-label" for="checkbox_3">Completed Items</label>
                </div>
                <div class="form-check mb-1">
                  <input class="form-check-input" type="checkbox" id="checkbox_4">
                  <label class="form-check-label" for="checkbox_4">Sold Items</label>
                </div>
                <div class="form-check mb-1">
                  <input class="form-check-input" type="checkbox" id="checkbox_5">
                  <label class="form-check-label" for="checkbox_5">Deals &amp; Savings</label>
                </div>
                <div class="form-check mb-4">
                  <input class="form-check-input" type="checkbox" id="checkbox_6">
                  <label class="form-check-label" for="checkbox_6">Authorized Seller</label>
                </div>
                <h6 class="text-uppercase mb-3">Buying format</h6>
                <div class="form-check mb-1">
                  <input class="form-check-input" type="radio" name="customRadio" id="radio_1">
                  <label class="form-check-label" for="radio_1">All Listings</label>
                </div>
                <div class="form-check mb-1">
                  <input class="form-check-input" type="radio" name="customRadio" id="radio_2">
                  <label class="form-check-label" for="radio_2">Best Offer</label>
                </div>
                <div class="form-check mb-1">
                  <input class="form-check-input" type="radio" name="customRadio" id="radio_3">
                  <label class="form-check-label" for="radio_3">Auction</label>
                </div>
                <div class="form-check mb-1">
                  <input class="form-check-input" type="radio" name="customRadio" id="radio_4">
                  <label class="form-check-label" for="radio_4">Buy It Now</label>
                </div>
              </div> --}}
              <!-- SHOP LISTING-->
              <div class="col-lg-12 order-1 order-lg-2 mb-5 mb-lg-0">
                <div class="row mb-3 align-items-center">
                  <div class="col-lg-6 mb-2 mb-lg-0">
                    {{!-- <p class="text-sm text-muted mb-0">Showing 1â€“12 of 53 results</p> --}}
                  </div>
                  <div class="col-lg-6">
                    <ul class="list-inline d-flex align-items-center justify-content-lg-end mb-0">
                      {{!-- <li class="list-inline-item text-muted me-3"><a class="reset-anchor p-0" href="#!"><i
                            class="fas fa-th-large"></i></a></li>
                      <li class="list-inline-item text-muted me-3"><a class="reset-anchor p-0" href="#!"><i
                            class="fas fa-th"></i></a></li> --}}
                      <li class="list-inline-item">
                        <select class="selectpicker" data-customclass="form-control form-control-sm"
                          onchange="location = this.value">
                          <option value="" id="select">Sort By </option>
                          <option id="sortBy" value="/view-products">Default sorting </option>
                          <option id="sortBy" value="/view-products/popularity">Popularity </option>
                          <option id="sortBy" value="/view-products/lowTohigh">Price: Low to High </option>
                          <option id="sortBy" value="/view-products/hightTolow">Price: High to Low </option>
                        </select>

                        {{!-- <select class="selectpicker" data-customclass="form-control form-control-sm"
                          onchange="location = this.value" id="select">
                          <option value="" id="">Sort By </option>
                          <option id="sortBy" value="defalult">Default sorting </option>
                          <option id="sortBy" value="pupularity">Popularity </option>
                          <option id="sortBy" value="lowTohigh">Price: Low to High </option>
                          <option id="sortBy" value="hightTOlow">Price: High to Low </option>
                        </select> --}}
                      </li>
                    </ul>
                  </div>
                </div>
                <div class="row">
                  <!-- PRODUCT-->
                  {{#each product}}
                  <div class="col-lg-4 col-sm-6 my-4">
                    <div class="product text-center">
                      <div class="mb-3 position-relative">
                        <div class="badge text-white"> </div><a class="d-block"
                          href="/productDetails?id={{this._id}}">  <img src="/product-images/{{this._id}}1.jpg" alt="..."
                            style="height:20rem;widht:20rem"></a>
                            {{!-- <button  onclick="wish({{this._id}})" class="btn"><div class="float-right"><i class="far fa-heart me-1 "></i></div></button> --}}
                        <div class="product-overlay">
                          <ul class="mb-0 list-inline">
                            <li class="list-inline-item m-0 p-0">

                              
                              <button class="btn btn-sm btn-outline-dark"
                                onclick="wish('{{this._id}}')"><i class="far fa-heart"></i></button></li>





                                {{!-- href="/add-to-wishlist/{{this._id}}"><i class="far fa-heart"></i></button></li> --}}
                                {{!-- href="/add-to-wishlist/{{this._id}}"><i class="far fa-heart"></i></a></li> --}}
                            {{!-- <li class="list-inline-item m-0 p-0"><button class="btn btn-sm btn-outline-dark"
                                onclick="addToWishlist('{{this._id}}')"><i class="far fa-heart"></i></button></li> --}}
                            {{!-- <li class="list-inline-item m-0 p-0"><a class="btn btn-sm btn-dark"
                                href="/add-to-cart/{{this._id}}">Add to cart</a></li>/ --}}
                            <li class="list-inline-item m-0 p-0"><button class="btn tbn-sm btn-dark"
                                onclick="addToCart('{{this._id}}')">Add to Cart</button></li>
                            <li class="list-inline-item mr-0"><a class="btn btn-sm btn-outline-dark"
                                href="/productDetails?id={{this._id}}" data-bs-toggle="modal"><i
                                  class="fas fa-expand"></i></a></li>
                          </ul>
                        </div>
                      </div>
                      <div class="my-2" style="">

                        <h6> <a class="reset-anchor d-flex justify-content-start ml-5"
                            href="/productDetails?id={{this._id}}"
                            style="color: gray; font-size:x-small">{{this.product_title}}</a>
                        </h6>
                        <h6> <a class="reset-anchor d-flex justify-content-start ml-5"
                            href="/productDetails?id={{this._id}}" style="font-size: 14px;">{{this.product_description}}</a>
                        </h6>
                      </div>
                      {{#if this.offerPrice}}
                      <div class="d-flex justify-content-start ml-5">

                        <p class="small"><strong>â‚¹{{this.offerPrice}}</p></strong>

                        <p class="small text-muted ml-3"><span class="font-weight-bold">â‚¹</span><del
                            style="color: rgb(170, 170, 170);">{{this.price}}</del>
                        </p>
                      </div>
                      {{else}}
                      <p class="small d-flex justify-content-start ml-5"><span class="font-weight-bold">â‚¹</span>
                        <strong>{{this.price}}</strong></p>
                      {{/if}}

                    </div>
                  </div>
                  {{/each}}


                  <div class="row">
                    {{#each product}}
                    <div class="col-lg-4 col-sm-6 my-3">
                      <div class="product-grid">
                        <div class="product-image d-flex justify-content-center" style="height: 370;width:200">
                          <div>

                            <a href="/add-to-wishlist/{{this._id}}" class="image w-75 h-75">
                              <img src="/product-images/{{this._id}}1.jpg">
                            </a>
                          </div>
                          {{!-- <span class="product-discount-label">-23%</span> --}}
                          <ul class="product-links">
                            <li><a href="#"><i class="fa fa-search"></i></a></li>
                            <li><a href="#"><i class="fa fa-heart"></i></a></li>
                            <li><a href="#"><i class="fa fa-random"></i></a></li>
                          </ul>
                          <a href="" class="add-to-cart">Add to Cart</a>
                        </div>
                        {{!-- <div class="product-content"> --}}
                          {{!-- <h3 class="title"><a href="#">Women's Blouse Top</a></h3>
                          <div class="price">$53.55 <span>$68.88</span></div> --}}

                          <div class="my-2">

                            <h6> <a class="reset-anchor d-flex justify-content-start ml-5"
                                href="/productDetails?id={{this._id}}"
                                style="color: gray; font-size:x-small">{{this.product_title}}</a>
                            </h6>
                            <h6> <a class="reset-anchor d-flex justify-content-start ml-5"
                                href="/productDetails?id={{this._id}}"
                                style="font-size:14px;">{{this.product_description}}</a>
                            </h6>
                          </div>
                          {{#if this.offerPrice}}
                          <div class="d-flex justify-content-start ml-5">

                            <p class="small"><strong>â‚¹{{this.offerPrice}}</p></strong>

                            <p class="small text-muted ml-3"><span class="font-weight-bold">â‚¹</span><del
                                style="color: rgb(170, 170, 170);">{{this.price}}</del>
                            </p>
                          </div>
                          {{else}}
                          <p class="small d-flex justify-content-start ml-5"><span class="font-weight-bold">â‚¹</span>
                            <strong>{{this.price}}</strong></p>
                          {{/if}}
                          {{!--
                        </div> --}}
                      </div>
                    </div>

                    {{/each}}
                  </div>


                  <!-- PAGINATION-->
                  {{!-- <nav aria-label="Page navigation example">
                    <ul class="pagination justify-content-center justify-content-lg-end">
                      <li class="page-item mx-1"><a class="page-link" href="#!" aria-label="Previous"><span
                            aria-hidden="true">Â«</span></a></li>
                      <li class="page-item mx-1 active"><a class="page-link" href="#!">1</a></li>
                      <li class="page-item mx-1"><a class="page-link" href="#!">2</a></li>
                      <li class="page-item mx-1"><a class="page-link" href="#!">3</a></li>
                      <li class="page-item ms-1"><a class="page-link" href="#!" aria-label="Next"><span
                            aria-hidden="true">Â»</span></a></li>
                    </ul>
                  </nav> --}}
                </div>
              </div>
            </div>
        </section>
      </div>
      {{!-- <footer class="bg-dark text-white">
        <div class="container py-4">
          <div class="row py-5">
            <div class="col-md-4 mb-3 mb-md-0">
              <h6 class="text-uppercase mb-3">Customer services</h6>
              <ul class="list-unstyled mb-0">
                <li><a class="footer-link" href="#!">Help &amp; Contact Us</a></li>
                <li><a class="footer-link" href="#!">Returns &amp; Refunds</a></li>
                <li><a class="footer-link" href="#!">Online Stores</a></li>
                <li><a class="footer-link" href="#!">Terms &amp; Conditions</a></li>
              </ul>
            </div>
            <div class="col-md-4 mb-3 mb-md-0">
              <h6 class="text-uppercase mb-3">Company</h6>
              <ul class="list-unstyled mb-0">
                <li><a class="footer-link" href="#!">What We Do</a></li>
                <li><a class="footer-link" href="#!">Available Services</a></li>
                <li><a class="footer-link" href="#!">Latest Posts</a></li>
                <li><a class="footer-link" href="#!">FAQs</a></li>
              </ul>
            </div>
            <div class="col-md-4">
              <h6 class="text-uppercase mb-3">Social media</h6>
              <ul class="list-unstyled mb-0">
                <li><a class="footer-link" href="#!">Twitter</a></li>
                <li><a class="footer-link" href="#!">Instagram</a></li>
                <li><a class="footer-link" href="#!">Tumblr</a></li>
                <li><a class="footer-link" href="#!">Pinterest</a></li>
              </ul>
            </div>
          </div>
          <div class="border-top pt-4" style="border-color: #1d1d1d !important">
            <div class="row">
              <div class="col-md-6 text-center text-md-start">
                <p class="small text-muted mb-0">&copy; 2021 All rights reserved.</p>
              </div>
              <div class="col-md-6 text-center text-md-end">
                <p class="small text-muted mb-0">Template designed by <a class="text-white reset-anchor"
                    href="https://bootstrapious.com/p/boutique-bootstrap-e-commerce-template">Bootstrapious</a></p>
                <!-- If you want to remove the backlink, please purchase the Attribution-Free License. See details in readme.txt or license.txt. Thanks!-->
              </div>
            </div>
          </div>
        </div>
      </footer> --}}
      <!-- JavaScript files-->
      <script src="/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
      <script src="/vendor/glightbox/js/glightbox.min.js"></script>
      <script src="/vendor/nouislider/nouislider.min.js"></script>
      <script src="/vendor/swiper/swiper-bundle.min.js"></script>
      <script src="/vendor/choices.js/public/assets/scripts/choices.min.js"></script>
      {{!--
      <script src="js/front.js"></script> --}}
      <!-- Nouislider Config-->
      <script>
        var range = document.getElementById('range');
        noUiSlider.create(range, {
          range: {
            'min': 0,
            'max': 2000
          },
          step: 5,
          start: [100, 1000],
          margin: 300,
          connect: true,
          direction: 'ltr',
          orientation: 'horizontal',
          behaviour: 'tap-drag',
          tooltips: true,
          format: {
            to: function (value) {
              return '$' + value;
            },
            from: function (value) {
              return value.replace('', '');
            }
          }
        });



        /////////////sort fileters/////////////////

        (function () {

          let field = document.querySelector('.sort');
          let li = Array.from(field.children);




          function SortProduct() {
            let select = document.getElementById('select');
            let ar = [];
            for (let i of li) {
              const last = i.lastElementChild;
              const x = last.textContent.trim();
              const y = Number(x.substring(1));
              i.setAttribute("data-price", y);
              ar.push(i);
            }
            this.run = () => {
              addevent();
            }
            function addevent() {
              select.onchange = sortingValue;
            }
            function sortingValue() {

              if (this.value === 'Default') {
                while (field.firstChild) { field.removeChild(field.firstChild); }
                field.append(...ar);
              }
              if (this.value === 'LowToHigh') {
                SortElem(field, li, true)
              }
              if (this.value === 'HighToLow') {
                SortElem(field, li, false)
              }
            }
            function SortElem(field, li, asc) {
              let dm, sortli;
              dm = asc ? 1 : -1;
              sortli = li.sort((a, b) => {
                const ax = a.getAttribute('data-price');
                const bx = b.getAttribute('data-price');
                return ax > bx ? (1 * dm) : (-1 * dm);
              });
              while (field.firstChild) { field.removeChild(field.firstChild); }
              field.append(...sortli);
            }
          }

          new FilterProduct().run();
          new SortProduct().run();
        })();
  /////////////////end///////////////////

function checkWish(){
  fetch(`/check-wishlist/${proId}`).then(response=>response.json())
  .then(response=>{
    console.log(response)

  })
}



function wish(proId){
console.log(proId)
    $.ajax({
        url:`/add-to-wishlist/${proId}`,

        method:'get',
        success:(response)=>{
          if(response.status){
            
           Swal.fire(
            'Good job!',
             'You clicked the button!',
             'success'
        )
        let count=$('#wish-count').html()
            count=parseInt(count)+1
            $("#wish-count").html(count)
          }
                
        }


    })
}

function unWish(userId, proId) {
    let div = document.querySelector(".liked"+proId)
    div.classList.add("hide-like-btn")
    
    
    $.ajax({
        url: '/wish-list',
        data:{
            user:userId,
            proId:proId
        },
        method:'post',
        success: (response) => {
            console.log(response);
            if (!response.status) {
               
            }
            
        }
    })
   
}
// Handlebars.registerHelper('ifEquals', function(arg1, arg2, options) {
//     return (arg1 == arg2) ? options.fn(this) : options.inverse(this);
// });

function removeWish(proId){
    swal({
        title: "Are you sure?",
        text: "remove  from wishlist",
        icon: "warning",
        buttons: true,
        dangerMode: true,
      })
      .then((willDelete) => {
        if (willDelete) {
            $.ajax({
                url:'/remove-wish?id='+proId,
                method:'get',
                success:(response)=>{
                    
                    location.reload();
                }
                
            })
        
        } else {
      
        }
      });
  
}

      </script>


    </div>
  </body>
</section>